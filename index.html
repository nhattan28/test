<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle"></title>
    <style>
        /* Cài đặt gốc */
        body {
            font-family: Arial, sans-serif;
            margin: 0; /* Đặt margin về 0 để kiểm soát tốt hơn */
            padding: 20px; /* Thêm padding tổng thể cho body */
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
            scroll-behavior: smooth;
            box-sizing: border-box; /* Quan trọng để padding không làm tăng tổng chiều rộng/chiều cao */
        }
        h1, h2 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 1.8em; /* Kích thước chữ tương đối */
        }
        .language-switcher {
            text-align: center;
            margin-bottom: 25px;
        }
        .language-switcher button {
            padding: 10px 20px;
            margin: 0 5px;
            cursor: pointer;
            background-color: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            transition: background-color 0.3s ease;
        }
        .language-switcher button:hover {
            background-color: #5a6268;
        }
        .info-container {
            width: 95%; /* Sử dụng phần trăm để linh hoạt */
            max-width: 900px; /* Giới hạn chiều rộng tối đa */
            margin: 20px auto; /* Căn giữa tự động */
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            box-sizing: border-box; /* Bao gồm padding vào chiều rộng/chiều cao */
        }
        .info-box {
            border: 1px solid #e0e0e0;
            padding: 18px;
            margin-bottom: 15px;
            border-radius: 6px;
            background-color: #fcfcfc;
            display: flex; /* Sử dụng Flexbox cho các cặp strong-span */
            flex-wrap: wrap; /* Cho phép các mục xuống dòng nếu không đủ chỗ */
        }
        .info-box div { /* Đặt mỗi cặp strong-span vào một div để dễ quản lý flex */
            display: flex;
            flex-basis: 100%; /* Mỗi cặp chiếm 100% chiều rộng ban đầu */
            margin-bottom: 8px; /* Khoảng cách giữa các dòng thông tin */
        }
        .info-box div:last-child {
            margin-bottom: 0;
        }
        strong {
            color: #007bff;
            flex-basis: 220px; /* Chiều rộng cố định cho nhãn trên màn hình lớn */
            min-width: 120px; /* Đảm bảo nhãn không quá nhỏ */
            margin-right: 10px;
            vertical-align: top;
            font-weight: bold;
            flex-shrink: 0; /* Ngăn không cho nhãn bị co lại */
        }
        span {
            flex-grow: 1; /* Cho phép nội dung mở rộng để lấp đầy không gian còn lại */
            word-break: break-word; /* Thay vì break-all, break-word tốt hơn cho văn bản */
            min-width: 0; /* Quan trọng để flex-item có thể co lại nhỏ hơn nội dung */
        }
        .action-button {
            padding: 10px 20px;
            cursor: pointer;
            margin-top: 15px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            transition: background-color 0.3s ease;
            width: auto; /* Kích thước tự động theo nội dung */
        }
        .action-button:hover {
            background-color: #218838;
        }
        .action-button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .error-message {
            color: red;
            margin-top: 10px;
            font-size: 0.9em;
        }
        video {
            display: block;
            margin-top: 20px;
            max-width: 100%;
            border: 1px solid #ccc;
            background-color: #000;
            transform: scaleX(-1);
            -webkit-transform: scaleX(-1); /* Hỗ trợ trình duyệt cũ hơn (Chrome/Safari) */
            height: 240px; /* Chiều cao cố định */
            object-fit: cover; /* Đảm bảo video lấp đầy khung mà không bị méo */
        }

        /* MEDIA QUERIES cho màn hình nhỏ hơn (ví dụ: điện thoại di động) */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }
            h1, h2 {
                font-size: 1.5em; /* Giảm kích thước chữ cho tiêu đề */
            }
            .info-container {
                padding: 20px; /* Giảm padding cho container */
                width: 98%; /* Tăng chiều rộng để tận dụng không gian */
            }
            .info-box div {
                flex-direction: column; /* Chuyển sang bố cục cột */
                margin-bottom: 12px; /* Tăng khoảng cách giữa các cặp */
            }
            strong {
                flex-basis: auto; /* Bỏ chiều rộng cố định */
                margin-bottom: 5px; /* Khoảng cách giữa nhãn và nội dung */
                margin-right: 0; /* Bỏ margin phải */
            }
            span {
                width: 100%; /* Nội dung chiếm toàn bộ chiều rộng còn lại */
                text-align: left; /* Căn trái nội dung */
            }
            .language-switcher button {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            .action-button {
                width: 100%; /* Nút bấm chiếm toàn bộ chiều rộng */
                box-sizing: border-box;
            }
            video {
                height: 180px; /* Giảm chiều cao video trên màn hình nhỏ hơn */
            }
        }

        /* MEDIA QUERIES cho màn hình rất nhỏ (ví dụ: điện thoại cũ) */
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            .info-container {
                padding: 15px;
            }
            h1, h2 {
                font-size: 1.3em;
            }
            .language-switcher button {
                display: block; /* Mỗi nút trên một dòng */
                margin: 5px auto; /* Căn giữa */
                width: 80%;
            }
        }
    </style>
</head>
<body>
    <div class="language-switcher">
        <button onclick="setLanguage('vi')">Tiếng Việt</button>
        <button onclick="setLanguage('en')">English</button>
    </div>

    <h1 id="mainTitle"></h1>

    <div class="info-container">
        <h2 id="basicInfoTitle"></h2>
        <div class="info-box">
            <div><strong id="osLabel"></strong> <span id="osName"></span></div>
            <div><strong id="deviceLabel"></strong> <span id="deviceType"></span></div>
            <div><strong id="browserLabel"></strong> <span id="browserName"></span></div>
            <div><strong id="windowSizeLabel"></strong> <span id="windowSize"></span></div>
            <div><strong id="screenResolutionLabel"></strong> <span id="screenResolution"></span></div>
            <div><strong id="browserLanguageLabel"></strong> <span id="browserLanguage"></span></div>
            <div><strong id="cpuCoresLabel"></strong> <span id="cpuCores"></span></div>
            <div><strong id="onlineStatusLabel"></strong> <span id="onlineStatus"></span></div>
            <div><strong id="networkTypeLabel"></strong> <span id="networkType"></span></div>
            <div><strong id="networkSpeedLabel"></strong> <span id="networkSpeed"></span></div>
        </div>

        <h2 id="cameraTitle"></h2>
        <div class="info-box">
            <button id="startCameraButton" class="action-button"></button>
            <button id="stopCameraButton" class="action-button" disabled></button>
            <video id="cameraFeed" autoplay playsinline></video>
            <p class="error-message" id="cameraError"></p>
        </div>
    </div>

    <script>
        const translations = {
            'vi': {
                'pageTitle': 'Thông tin thiết bị của bạn',
                'mainTitle': 'Thông tin thiết bị của bạn',
                'basicInfoTitle': 'Thông tin cơ bản thiết bị',
                // Đã xóa 'userAgentLabel' ở đây
                'osLabel': 'Hệ điều hành (Nền tảng):',
                'deviceLabel': 'Loại thiết bị (Ước tính):',
                'browserLabel': 'Trình duyệt (Ước tính):',
                'windowSizeLabel': 'Kích thước cửa sổ trình duyệt:',
                'screenResolutionLabel': 'Độ phân giải màn hình:',
                'browserLanguageLabel': 'Ngôn ngữ trình duyệt:',
                'cpuCoresLabel': 'Số lõi CPU (ước tính):',
                'onlineStatusLabel': 'Trạng thái Online:',
                'networkTypeLabel': 'Loại kết nối mạng (hiệu quả):',
                'networkSpeedLabel': 'Tốc độ (ước tính):',
                'notDetected': 'Không xác định',
                'width': 'rộng',
                'height': 'cao',
                'online': 'Online',
                'offline': 'Offline',

                'cameraTitle': 'Camera',
                'startCameraButton': 'Bật Camera',
                'stopCameraButton': 'Tắt Camera',
                'cameraPermissionDenied': 'Bạn đã từ chối quyền truy cập camera hoặc trình duyệt đã chặn.',
                'cameraNotFound': 'Không tìm thấy thiết bị camera nào.',
                'cameraGeneralError': 'Lỗi khi truy cập camera:',
            },
            'en': {
                'pageTitle': 'Your Device Information',
                'mainTitle': 'Your Device Information',
                'basicInfoTitle': 'Basic Device Information',
                // Đã xóa 'userAgentLabel' ở đây
                'osLabel': 'Operating System (Platform):',
                'deviceLabel': 'Device Type (Estimated):',
                'browserLabel': 'Browser (Estimated):',
                'windowSizeLabel': 'Browser Window Size:',
                'screenResolutionLabel': 'Screen Resolution:',
                'browserLanguageLabel': 'Browser Language:',
                'cpuCoresLabel': 'CPU Cores (estimated):',
                'onlineStatusLabel': 'Online Status:',
                'networkTypeLabel': 'Network Type (Effective):',
                'networkSpeedLabel': 'Speed (estimated):',
                'notDetected': 'Not detected',
                'width': 'width',
                'height': 'height',
                'online': 'Online',
                'offline': 'Offline',

                'cameraTitle': 'Camera',
                'startCameraButton': 'Turn On Camera',
                'stopCameraButton': 'Turn Off Camera',
                'cameraPermissionDenied': 'You denied camera access or the browser blocked it.',
                'cameraNotFound': 'No camera device found.',
                'cameraGeneralError': 'Error accessing camera:',
            }
        };

        let currentLang = 'vi';
        let cameraStream;

        function updateContent(lang) {
            const t = translations[lang];

            document.getElementById('pageTitle').textContent = t.pageTitle;
            document.getElementById('mainTitle').textContent = t.mainTitle;
            document.getElementById('basicInfoTitle').textContent = t.basicInfoTitle;

            // Đã xóa dòng sau: document.getElementById('userAgentLabel').textContent = t.userAgentLabel;
            document.getElementById('osLabel').textContent = t.osLabel;
            document.getElementById('deviceLabel').textContent = t.deviceLabel;
            document.getElementById('browserLabel').textContent = t.browserLabel;
            document.getElementById('windowSizeLabel').textContent = t.windowSizeLabel;
            document.getElementById('screenResolutionLabel').textContent = t.screenResolutionLabel;
            document.getElementById('browserLanguageLabel').textContent = t.browserLanguageLabel;
            document.getElementById('cpuCoresLabel').textContent = t.cpuCoresLabel;
            document.getElementById('onlineStatusLabel').textContent = t.onlineStatusLabel;
            document.getElementById('networkTypeLabel').textContent = t.networkTypeLabel;
            document.getElementById('networkSpeedLabel').textContent = t.networkSpeedLabel;

            document.getElementById('cameraTitle').textContent = t.cameraTitle;
            document.getElementById('startCameraButton').textContent = t.startCameraButton;
            document.getElementById('stopCameraButton').textContent = t.stopCameraButton;

            // Đã xóa dòng sau: document.getElementById('userAgent').textContent = navigator.userAgent || t.notDetected;

            let osName = navigator.platform || t.notDetected;
            if (osName.includes("Win")) osName = "Windows";
            else if (osName.includes("Mac")) osName = "macOS";
            else if (osName.includes("Linux")) osName = "Linux";
            else if (osName.includes("Android")) osName = "Android";
            else if (osName.includes("iPhone") || osName.includes("iPad")) osName = "iOS";
            document.getElementById('osName').textContent = osName;

            let deviceType = t.notDetected;
            const ua = navigator.userAgent;
            if (/Mobi|Android|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(ua)) {
                deviceType = 'Mobile';
            } else if (/iPad|Tablet/i.test(ua)) {
                deviceType = 'Tablet';
            } else {
                deviceType = 'Desktop';
            }
            document.getElementById('deviceType').textContent = deviceType;

            let browserName = t.notDetected;
            if (ua.includes('Chrome') && !ua.includes('Edge')) {
                browserName = 'Chrome';
            } else if (ua.includes('Firefox')) {
                browserName = 'Firefox';
            } else if (ua.includes('Safari') && !ua.includes('Chrome')) {
                browserName = 'Safari';
            } else if (ua.includes('Edge')) {
                browserName = 'Edge';
            } else if (ua.includes('Opera') || ua.includes('OPR')) {
                browserName = 'Opera';
            } else if (ua.includes('MSIE') || ua.includes('Trident')) {
                browserName = 'Internet Explorer';
            }
            document.getElementById('browserName').textContent = browserName;

            document.getElementById('windowSize').textContent = `${window.innerWidth || t.notDetected}px (${t.width}) x ${window.innerHeight || t.notDetected}px (${t.height})`;
            document.getElementById('screenResolution').textContent = `${screen.width || t.notDetected}px (${t.width}) x ${screen.height || t.notDetected}px (${t.height})`;

            document.getElementById('browserLanguage').textContent = navigator.language || navigator.browserLanguage || t.notDetected;
            document.getElementById('cpuCores').textContent = navigator.hardwareConcurrency || t.notDetected;
            document.getElementById('onlineStatus').textContent = navigator.onLine ? t.online : t.offline;

            if (navigator.connection) {
                document.getElementById('networkType').textContent = navigator.connection.effectiveType || t.notDetected;
                document.getElementById('networkSpeed').textContent = navigator.connection.downlink ? `${navigator.connection.downlink} Mbps` : t.notDetected;
            } else {
                document.getElementById('networkType').textContent = t.notDetected;
                document.getElementById('networkSpeed').textContent = t.notDetected;
            }
        }

        function setLanguage(lang) {
            currentLang = lang;
            document.documentElement.lang = lang;
            updateContent(currentLang);
            localStorage.setItem('preferredLang', lang);
        }

        const startCameraButton = document.getElementById('startCameraButton');
        const stopCameraButton = document.getElementById('stopCameraButton');
        const cameraFeed = document.getElementById('cameraFeed');
        const cameraError = document.getElementById('cameraError');

        startCameraButton.addEventListener('click', async () => {
            const t = translations[currentLang];
            cameraError.textContent = '';
            try {
                cameraStream = await navigator.mediaDevices.getUserMedia({ video: true, audio: false });
                cameraFeed.srcObject = cameraStream;
                startCameraButton.disabled = true;
                stopCameraButton.disabled = false;
                cameraFeed.style.display = 'block';
            } catch (err) {
                console.error(t.cameraGeneralError, err);
                if (err.name === 'NotAllowedError' || err.name === 'PermissionDeniedError') {
                    cameraError.textContent = t.cameraPermissionDenied;
                } else if (err.name === 'NotFoundError' || err.name === 'DevicesNotFoundError') {
                    cameraError.textContent = t.cameraNotFound;
                } else {
                    cameraError.textContent = `${t.cameraGeneralError} ${err.message}`;
                }
                cameraFeed.style.display = 'none';
            }
        });

        stopCameraButton.addEventListener('click', () => {
            if (cameraStream) {
                cameraStream.getTracks().forEach(track => track.stop());
                cameraFeed.srcObject = null;
                startCameraButton.disabled = false;
                stopCameraButton.disabled = true;
                cameraError.textContent = '';
                cameraFeed.style.display = 'none';
            }
        });

        document.addEventListener('DOMContentLoaded', function() {
            const savedLang = localStorage.getItem('preferredLang');
            const browserLang = navigator.language.split('-')[0];

            if (savedLang && translations[savedLang]) {
                setLanguage(savedLang);
            } else if (translations[browserLang]) {
                setLanguage(browserLang);
            } else {
                setLanguage(currentLang);
            }

            window.addEventListener('resize', () => updateContent(currentLang));
            if (navigator.connection) {
                navigator.connection.addEventListener('change', () => updateContent(currentLang));
            }
            window.addEventListener('online', () => updateContent(currentLang));
            window.addEventListener('offline', () => updateContent(currentLang));

            cameraFeed.style.display = 'none';
        });
    </script>
</body>
</html>
